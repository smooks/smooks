language: java
dist: trusty
# workaround for travis-ci/travis-ci#5227
# See https://github.com/travis-ci/travis-ci/issues/5227#issuecomment-165131913
addons:
  hosts:
    - smooks
  hostname: smooks

jdk:
  - oraclejdk8
  - openjdk7

script:
  - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
  - mvn test -B
  - mvn javadoc:aggregate -DreportOutputDirectory=target/site/javadoc/v\${project.version} -DdestDir=smooks $(echo $TRAVIS_JDK_VERSION | grep -q oraclejdk8 && echo -n -Dadditionalparam=-Xdoclint:none) -B

notifications:
  email:
    recipients:
      - dev@milyn.codehaus.org
    on_success: [change]
    on_failure: [always]